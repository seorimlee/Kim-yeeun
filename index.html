<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title></title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <link rel="stylesheet" href="https://use.typekit.net/qyf3oio.css">
    <link rel="stylesheet" href="layout.css" />
</head>

<body>
    <header>
        <ul>
            <li>KIM YE EUN</li>
        </ul>
        <ul>
            <li class="category-work">WORK</li>
            <li class="category-video">VIDEO</li>
            <li class="category-contact">CONTACT</li>
        </ul>
    </header>
    <main>
        <div class="container-main">
            <p><span class="typed-text"></span><span class="cursor">&nbsp;</span></p>
        </div>
    </main>
    <div class="container">

        <section class="parallax-section">
            <div class="image" style="background-image: url('section1.jpg');"></div>
            <div class="stuff">
                <h2>WORKS</h2>
            </div>
        </section>

        <section class="parallax-section">
            <div class="image" style="background-image: url('section2.jpg');"></div>
            <div class="stuff">
                <h2>INTERVIEW</h2>
            </div>
        </section>

        <section class="parallax-section">
            <div class="image" style="background-image: url('section3.jpg');"></div>
            <div class="stuff">
                <h2>INSTAGRAM</h2>
            </div>
        </section>

    </div>

    <script>
        function parallaxIt() {
            var $fwindow = $(window);
            var scrollTop = window.pageYOffset || document.documentElement.scrollTop;
            var $backgrounds = [];

            // Set up background elements
            $('[data-type="background"]').each(function() {
                var $backgroundObj = $(this);
                $backgroundObj.__speed = ($backgroundObj.data('speed') || 1);
                $backgroundObj.__fgOffset = $backgroundObj.offset().top;
                $backgrounds.push($backgroundObj);
            });

            // Update background positions
            function updatePositions() {
                scrollTop = window.pageYOffset || document.documentElement.scrollTop;

                // Update background positions (images)
                $backgrounds.forEach(function($backgroundObj) {
                    var yPos = -((scrollTop - $backgroundObj.__fgOffset) / $backgroundObj.__speed);
                    $backgroundObj.css({
                        backgroundPosition: 'center ' + (yPos * 1) + 'px', // 배경이 더 빠르게 움직이도록 설정
                    });
                });
            }

            // Scroll event listener
            $fwindow.on('scroll resize', function() {
                window.requestAnimationFrame(updatePositions);
            });

            // Initialize on load
            $fwindow.trigger('scroll');
        }

        parallaxIt();

        window.addEventListener("scroll", function() {
            const sections = document.querySelectorAll(".container section .image");

            sections.forEach(function(section) {
                let scrollPosition = window.scrollY;
                let speed = 0.5; // 배경 이동 속도

                // 초기 위치를 -20px로 조정
                section.style.backgroundPosition = "center " + ((scrollPosition * speed) - 20) + "px";
            });
        });




        // 모바일에서는 스크롤 이벤트 최적화를 위해 requestAnimationFrame을 사용
        let scrollTimeout;
        window.addEventListener("scroll", function() {
            if (scrollTimeout) {
                cancelAnimationFrame(scrollTimeout);
            }
            scrollTimeout = requestAnimationFrame(handleScroll);
        });

        function handleScroll() {
            const sections = document.querySelectorAll(".container section .image");
            const scrollPosition = window.scrollY;
            const speed = 0.5;

            sections.forEach(function(section) {
                // 초기 위치를 -20px로 조정
                section.style.backgroundPosition = "center " + ((scrollPosition * speed) - 20) + "px";
            });
        }

    </script>
</body>

</html>
