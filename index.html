<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Section Background Scroll Effect</title>
    <style>
        *,
        *:after,
        *:before {
            box-sizing: border-box;
        }

        a {
            text-decoration: none;
        }

        body {
            font-family: Arial, sans-serif;
            margin: 0;
            background: #fff;
            color: #000;
            overflow-x: hidden;
            background-color: #000;
        }

        /* 헤더 */
        header {
            width: 100%;
            display: flex;
            justify-content: space-between;
            position: fixed;
            z-index: 9999;
        }

        header>ul {
            width: 50%;
            display: flex;
            justify-content: space-around;
            list-style: none;
            color: #fff;
        }

        header>ul:nth-child(1) {
            justify-content: flex-start;
            padding-left: 2%;
        }

        /* 비디오 */
        .video-container {
            width: 100%;
            height: auto;
            overflow: hidden;
            position: relative;
            margin: 30px 0;
        }

        video {
            width: 100%;
            height: auto;
            display: block;
            /* 비디오가 inline-block을 피하도록 설정 */
        }

        /* 섹션 기본 스타일 */
        .parallax_section {
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            background-size: cover !important;
            background-position: center;
            background-repeat: no-repeat;
            min-height: 100vh;
            /* 화면 높이 맞춤 */
            transition: background-position 0.1s ease-out;
        }

        .parallax_section h2 {
            color: #fff;
            font-size: 4rem;
            text-align: center;
            z-index: 1;
        }

        /* 각 섹션에 고유 배경 이미지 추가 */
        .section1 {
            background-image: url('main1.jpg');
        }

        .section2 {
            background-image: url('section2.jpg');
        }

        .section3 {
            background-image: url('section3.jpg');
        }

        .container-main p {
            font-size: 10em;
            padding: 0.5rem;
            font-weight: bold;
            letter-spacing: -0.3rem;
            text-align: center;
            overflow: hidden;
            display: flex;
            align-items: center;
        }

        .container-main p span.typed-text {
            font-weight: normal;
            color: #fff;
        }

        .container-main p span.cursor {
            display: inline-block;
            background-color: #fff;
            margin-left: 0.1rem;
            width: 3px;
            height: 1em;
            animation: blink 1s infinite;
        }

        .container-main p span.cursor.typing {
            animation: none;
        }

        @keyframes blink {
            0% {
                background-color: #fff;
            }

            49% {
                background-color: #fff;
            }

            50% {
                background-color: transparent;
            }

            99% {
                background-color: transparent;
            }

            100% {
                background-color: #fff;
            }
        }

        /* 팝업 오버레이 */
        .popup-overlay {
            display: none;
            /* 기본적으로 숨김 */
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.8);
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }

        /* 팝업 컨테이너 */
        .popup-container {
            background-color: white;
            padding: 20px;
            width: 80%;
            height: 70vh;
            overflow: auto;
            position: relative;
            box-shadow: 0px 0px 20px rgba(0, 0, 0, 0.2);
        }

        /* 닫기 버튼 */
        .close-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            color: #000;
            border: none;
            padding: 10px;
            font-size: 20px;
            cursor: pointer;
            background-color: rgba(255, 255, 255, 0)
        }

        /* 테이블 스타일 */
        .table-container table {
            width: 90%;
            border-collapse: collapse;
            font-size: 13px;
        }

        .table-container th,
        .table-container td {
            padding: 10px;
            border: 0px;
            text-align: center;
        }

        .table-container th {
            border-bottom: 1px solid;
        }


        .slide-container {
            position: relative;
            width: 100%;
            height: 100vh;
            overflow: hidden;
        }

        /* 슬라이드 공통 스타일 */
        .slide {
            display: flex;
            transition: transform 0.5s ease;
        }


        .slide.mobile {
            display: none;
        }

        @media screen and (min-width: 768px) {
            .pc {
                display: flex;
                width: 100%;
                /* 2개의 이미지씩 슬라이드 */
            }

            .slide-item {
                min-width: 100%;
                /* 각 이미지가 화면의 50%씩 차지 */
                display: flex;
            }

            .slide-item img {
                width: 50%;
                /* 이미지가 슬라이드에 맞게 조정 */
            }

            .prev,
            .next {
                position: absolute;
                top: 50%;
                transform: translateY(-50%);
                font-size: 2rem;
                background-color: rgba(0, 0, 0, 0.5);
                color: white;
                border: none;
                padding: 10px;
                cursor: pointer;
            }

            .prev {
                left: 10px;
            }

            .next {
                right: 10px;
            }
        }


        /* 모바일에서의 추가 최적화 */
        @media (max-width: 767px) {
            body {
                overflow-x: auto;
                /* 모바일에서 수평 스크롤이 필요할 수 있으므로 수정 */
            }

            header>ul {
                flex-direction: column;
            }

            header>ul>li {
                font-size: 16px;
                line-height: 104%;
            }

            header>ul:nth-of-type(2)>li {
                font-size: 30px;
            }

            header>ul:nth-child(2) {
                margin-right: 2%;
            }

            header>ul:nth-child(2)>li {
                text-align: right;
            }

            .parallax_section h2 {
                font-size: 2rem;
                /* 모바일에서 텍스트 크기 조정 */
            }

            .parallax_section {
                height: auto;
            }

            .section1 {
                min-height: 100vh;
            }

            .section2 {
                min-height: 100vh;
            }

            .section3 {
                min-height: 100vh;
            }

            .slide.pc {
                display: none;
            }

            .slide.mobile {
                display: flex;
                width: 100%;
            }

            .slide-item {
                min-width: 100%;
                /* 각 이미지가 화면의 100% 차지 */
            }

            .slide-item img {
                width: 100%;
                /* 이미지가 슬라이드에 맞게 조정 */
            }

            .prev,
            .next {
                display: none;
                /* 모바일에서는 버튼 숨기기 */
            }

            .container-main p {
                font-size: 4em;
            }

            .popup-container {
                width: 90%;
            }

        }

    </style>
</head>

<body>
    <header>
        <ul>
            <li>Kim Ye Eun<br>Korean Actress<br>2009~</li>
        </ul>
        <ul class="category">
            <li class="category-video">VIDEO</li>
            <li class="category-work">WORK</li>
            <li class="category-interview">INTERVIEW </li>
            <li class="category-contact">CONTACT</li>
        </ul>
    </header>
    <div class="parallax_section section1">
        <main>
            <div class="container-main">
                <p><span class="typed-text"></span><span class="cursor">&nbsp;</span></p>
            </div>
        </main>
    </div>
    <div class="video-container">
        <video autoplay muted loop>
            <source src="yaeeun-video2.mp4" type="video/mp4">
        </video>
    </div>
    <div class="parallax_section section2">
        <h2>WORKS</h2>
    </div>
    <!-- 팝업창 -->
    <div class="popup-overlay" id="popupOverlay">
        <div class="popup-container">
            <button class="close-btn" id="closePopup">X</button>
            <div class="table-container">
                <table>
                    <tr>
                        <th></th>
                        <th>Title</th>
                        <th>Role</th>
                    </tr>
                    <tr>
                        <td>2023</td>
                        <td>콘크리트 유토피아</td>
                        <td>동거녀</td>
                    </tr>
                    <tr>
                        <td>2023</td>
                        <td>엄마의 땅: 그리샤와 숲의 주인</td>
                        <td>주연 / 슈라 목소리</td>
                    </tr>
                    <tr>
                        <td>2022</td>
                        <td>올빼미</td>
                        <td>서상궁</td>
                    </tr>
                    <tr>
                        <td>2021</td>
                        <td>브로커</td>
                        <td>임씨 아내</td>
                    </tr>
                    <tr>
                        <td>2021</td>
                        <td>특송</td>
                        <td>지선</td>
                    </tr>
                    <tr>
                        <td>2020</td>
                        <td>당신은 믿지 않겠지만</td>
                        <td>주연 / 봄</td>
                    </tr>
                    <tr>
                        <td>2020</td>
                        <td>생각의 여름</td>
                        <td>주연 / 현실</td>
                    </tr>
                    <tr>
                        <td>2019</td>
                        <td>특송</td>
                        <td>지선</td>
                    </tr>
                    <tr>
                        <td>2019</td>
                        <td>타짜 3: 원 아이드 잭</td>
                        <td>준이 엄마</td>
                    </tr>
                    <tr>
                        <td>2019</td>
                        <td>오! 문희</td>
                        <td>한재숙</td>
                    </tr>
                    <tr>
                        <td>2019</td>
                        <td>항거</td>
                        <td>권애라</td>
                    </tr>
                    <tr>
                        <td>2019</td>
                        <td>어게인</td>
                        <td>주연 / 조연주</td>
                    </tr>
                    <tr>
                        <td>2018</td>
                        <td>너와 극장에서</td>
                        <td>주연 / 선미</td>
                    </tr>
                    <tr>
                        <td>2017</td>
                        <td>너는 결코 서둘지 말라</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>2017</td>
                        <td>소공녀</td>
                        <td>재경 역</td>
                    </tr>
                    <tr>
                        <td>2017</td>
                        <td>호랑이보다 무서운 겨울 손님</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>2017</td>
                        <td>김군</td>
                        <td>조사자</td>
                    </tr>
                    <tr>
                        <td>2017</td>
                        <td>군함도</td>
                        <td>기생</td>
                    </tr>
                    <tr>
                        <td>2016</td>
                        <td>환절기</td>
                        <td>지연</td>
                    </tr>
                    <tr>
                        <td>2016</td>
                        <td>양치기들</td>
                        <td>미진</td>
                    </tr>
                    <tr>
                        <td>2015</td>
                        <td>토마: 무녀굴</td>
                        <td></td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
    <div class="parallax_section section4">
        <a href="https://m.entertain.naver.com/article/312/0000592286">
            <h2>INTERVIEW</h2>
        </a>
    </div>
    <div class="slide-container">
        <!-- PC 슬라이드 -->
        <div class="slide pc">
            <div class="slide-item">
                <img src="photo-1.jpg" alt="photo 1">
                <img src="photo-2.jpg" alt="photo 2">
            </div>
            <div class="slide-item">
                <img src="photo-3.jpg" alt="photo 3">
                <img src="photo-4.jpg" alt="photo 4">
            </div>
            <div class="slide-item">
                <img src="photo-5.jpg" alt="photo 5">
                <img src="photo-6.jpg" alt="photo 6">
            </div>
        </div>

        <!-- 모바일 슬라이드 -->
        <div class="slide mobile">
            <div class="slide-item">
                <img src="photo-1.jpg" alt="photo 1">
            </div>
            <div class="slide-item">
                <img src="photo-2.jpg" alt="photo 2">
            </div>
            <div class="slide-item">
                <img src="photo-3.jpg" alt="photo 3">
            </div>
            <div class="slide-item">
                <img src="photo-4.jpg" alt="photo 4">
            </div>
            <div class="slide-item">
                <img src="photo-5.jpg" alt="photo 5">
            </div>
            <div class="slide-item">
                <img src="photo-6.jpg" alt="photo 6">
            </div>
        </div>

        <!-- 네비게이션 버튼 (PC 용) -->
        <button class="prev">이전</button>
        <button class="next">다음</button>
    </div>
    <div class="parallax_section section3">
        <a href="https://www.instagram.com/kimyaeeun/">
            <h2>INSTAGRAM</h2>
        </a>
    </div>

    <script>
        // 각 카테고리 클릭 시 해당 섹션으로 이동
        document.querySelector('.category-video').addEventListener('click', () => {
            const videoContainer = document.querySelector('.video-container');
            window.scrollTo({
                top: videoContainer.offsetTop,
                behavior: 'smooth' // 부드러운 스크롤 효과
            });
        });

        document.querySelector('.category-work').addEventListener('click', () => {
            const section2 = document.querySelector('.section2');
            window.scrollTo({
                top: section2.offsetTop,
                behavior: 'smooth' // 부드러운 스크롤 효과
            });
        });

        document.querySelector('.category-interview').addEventListener('click', () => {
            const section4 = document.querySelector('.section4');
            window.scrollTo({
                top: section4.offsetTop,
                behavior: 'smooth' // 부드러운 스크롤 효과
            });
        });

        document.querySelector('.category-contact').addEventListener('click', () => {
            const section3 = document.querySelector('.section3');
            window.scrollTo({
                top: section3.offsetTop,
                behavior: 'smooth' // 부드러운 스크롤 효과
            });
        });


        // 폰트 색상
        window.addEventListener('scroll', () => {
            const section2 = document.querySelector('.section2');
            const video = document.querySelector('.video-container');
            const section4 = document.querySelector('.section4');
            const section3 = document.querySelector('.section3');
            const headerItems = document.querySelectorAll('header > ul > li');
            const headerItemSelect2 = document.querySelectorAll('header > ul:nth-of-type(2) > li:nth-of-type(2)');
            const headerItemSelect1 = document.querySelectorAll('header > ul:nth-of-type(2) > li:first-child');
            const headerItemSelect3 = document.querySelectorAll('header > ul:nth-of-type(2) > li:nth-of-type(3)');
            const headerItemSelect4 = document.querySelectorAll('header > ul:nth-of-type(2) > li:nth-of-type(4)');

            const scrollPosition = window.pageYOffset;

            // 모바일에서만 section2에 대한 스타일 적용
            if (window.innerWidth <= 768) {
                // section2 관련 스타일 변경
                if (scrollPosition >= section2.offsetTop && scrollPosition < section2.offsetTop + section2.offsetHeight) {
                    headerItems.forEach(item => item.style.color = '#000'); // 모바일에서만 section2 진입 시 폰트 색상 변경
                } else {
                    headerItems.forEach(item => item.style.color = ''); // 원래 색상으로 복원
                    headerItemSelect2.forEach(item => item.style.textDecoration = ''); // 데코레이션 none으로
                    headerItemSelect1.forEach(item => item.style.textDecoration = ''); // 데코레이션 none으로
                    headerItemSelect3.forEach(item => item.style.textDecoration = ''); // 데코레이션 none으로
                    headerItemSelect4.forEach(item => item.style.textDecoration = ''); // 데코레이션 none으로
                }
            }

            // PC에서는 모든 기능 동작
            if (window.innerWidth > 768) {
                // section2 관련 스타일 변경
                if (scrollPosition >= section2.offsetTop && scrollPosition < section2.offsetTop + section2.offsetHeight) {
                    headerItems.forEach(item => item.style.color = '#000');
                    headerItemSelect2.forEach(item => item.style.textDecoration = 'underline');
                } else {
                    headerItems.forEach(item => item.style.color = ''); // 원래 색상으로 복원
                    headerItemSelect2.forEach(item => item.style.textDecoration = ''); // 데코레이션 none으로
                }

                // video 관련 스타일 변경
                if (scrollPosition >= video.offsetTop && scrollPosition < video.offsetTop + video.offsetHeight) {
                    headerItemSelect1.forEach(item => item.style.textDecoration = 'underline');
                } else {
                    headerItemSelect1.forEach(item => item.style.textDecoration = ''); // 데코레이션 none으로
                }

                // interview 관련 스타일 변경
                if (scrollPosition >= section4.offsetTop && scrollPosition < section4.offsetTop + section4.offsetHeight) {
                    headerItemSelect3.forEach(item => item.style.textDecoration = 'underline');
                } else {
                    headerItemSelect3.forEach(item => item.style.textDecoration = ''); // 데코레이션 none으로
                }

                // instagram 관련 스타일 변경
                if (scrollPosition >= section3.offsetTop && scrollPosition < section3.offsetTop + section3.offsetHeight) {
                    headerItemSelect4.forEach(item => item.style.textDecoration = 'underline');
                } else {
                    headerItemSelect4.forEach(item => item.style.textDecoration = ''); // 데코레이션 none으로
                }
            }
        });



        // Typed.js 효과
        const typedTextSpan = document.querySelector(".typed-text");
        const cursorSpan = document.querySelector(".cursor");

        const textArray = ["KIM YE EUN", "KIM YE EUN", "KIM YE EUN", "KIM YE EUN"];
        const typingDelay = 200;
        const erasingDelay = 100;
        const newTextDelay = 1000;
        let textArrayIndex = 0;
        let charIndex = 0;

        function type() {
            if (charIndex < textArray[textArrayIndex].length) {
                if (!cursorSpan.classList.contains("typing")) cursorSpan.classList.add("typing");
                typedTextSpan.textContent += textArray[textArrayIndex].charAt(charIndex);
                charIndex++;
                setTimeout(type, typingDelay);
            } else {
                cursorSpan.classList.remove("typing");
                setTimeout(erase, newTextDelay);
            }
        }

        function erase() {
            if (charIndex > 0) {
                if (!cursorSpan.classList.contains("typing")) cursorSpan.classList.add("typing");
                typedTextSpan.textContent = textArray[textArrayIndex].substring(0, charIndex - 1);
                charIndex--;
                setTimeout(erase, erasingDelay);
            } else {
                cursorSpan.classList.remove("typing");
                textArrayIndex++;
                if (textArrayIndex >= textArray.length) textArrayIndex = 0;
                setTimeout(type, typingDelay + 1100);
            }
        }

        document.addEventListener("DOMContentLoaded", function() {
            if (textArray.length) setTimeout(type, newTextDelay + 250);
        });


        // 모바일에서의 100vh 높이 문제 해결을 위한 JS
        const setVhUnit = () => {
            const vh = window.innerHeight * 0.03;
            document.documentElement.style.setProperty('--vh', `${vh}px`);
        };

        // 모바일 화면 크기 변경시 대응
        window.addEventListener('resize', setVhUnit);
        setVhUnit();

        // 성능 최적화를 위한 requestAnimationFrame 사용
        let lastScrollTop = 0;
        let isScrolling = false;

        function updateParallax() {
            const parallaxSections = document.querySelectorAll('.parallax_section');
            const scrollPosition = window.pageYOffset;

            parallaxSections.forEach((section, index) => {
                const sectionHeight = section.offsetHeight;
                let offset = (scrollPosition / sectionHeight) * 100; // 배경 이동 범위 확대 (200%까지)

                // 배경 이미지 이동 속도 조정 (모바일에서는 빠르게 이동)
                offset = Math.min(Math.max(offset, 20), 100); // 0% ~ 200% 사이로 배경 이미지 이동 (더 많이 이동)

                // 섹션의 배경 이동
                if (section.classList.contains('section3')) {
                    const secondSection = document.querySelector('.section2');
                    const secondSectionTop = secondSection.offsetTop;

                    if (scrollPosition < secondSectionTop) {
                        section.style.backgroundPosition = `center 20%`;
                    } else {
                        const scrollFromSecondSection = scrollPosition - secondSectionTop;
                        const thirdSectionHeight = sectionHeight;

                        const scrollRatio = scrollFromSecondSection / thirdSectionHeight;
                        const offset = scrollRatio * 100; // 0%에서 200%로 배경 이미지 이동

                        section.style.backgroundPosition = `center ${Math.min(offset, 100)}%`;
                    }
                } else {
                    section.style.backgroundPosition = `center ${offset}%`;
                }

                // 섹션의 배경 이동
                if (section.classList.contains('section2')) {
                    const secondSection = document.querySelector('.video-container');
                    const secondSectionTop = secondSection.offsetTop;

                    if (scrollPosition < secondSectionTop) {
                        section.style.backgroundPosition = `center 0%`;
                    } else {
                        const scrollFromSecondSection = scrollPosition - secondSectionTop;
                        const thirdSectionHeight = sectionHeight;

                        const scrollRatio = scrollFromSecondSection / thirdSectionHeight;
                        const offset = scrollRatio * 100; // 0%에서 200%로 배경 이미지 이동

                        section.style.backgroundPosition = `center ${Math.min(offset, 100)}%`;
                    }
                }
            });
        }

        // 스크롤 최적화를 위한 throttle
        window.addEventListener('scroll', function() {
            if (isScrolling) return; // 한번에 한 번만 실행
            isScrolling = true;
            requestAnimationFrame(() => {
                updateParallax();
                isScrolling = false;
            });
        });

        // 페이지 로딩 시 초기 배경 업데이트
        updateParallax();

        // section2 클릭 시 팝업 열기
        document.querySelector('.section2').addEventListener('click', function() {
            document.getElementById('popupOverlay').style.display = 'flex'; // 팝업 열기
        });

        // 팝업 닫기 버튼 클릭 시 팝업 닫기
        document.getElementById('closePopup').addEventListener('click', function() {
            document.getElementById('popupOverlay').style.display = 'none'; // 팝업 닫기
        });

        // 페이지 로드 후 또는 특정 조건에서 비디오를 자동 재생
        window.addEventListener('load', () => {
            const video = document.querySelector('.video-container');
            if (video) {
                video.play(); // 비디오를 자동으로 재생
            }
        });

    </script>
    <script>
        let slideIndex = 0;

        // PC 슬라이드 이동 함수
        function moveSlide(offset) {
            const slides = document.querySelector('.pc');
            const totalSlides = document.querySelectorAll('.pc .slide-item').length;
            const slideWidth = 50; // PC에서 한 슬라이드가 차지하는 너비(%)

            // 슬라이드 인덱스 업데이트
            slideIndex = (slideIndex + offset + totalSlides) % totalSlides;

            // 슬라이드 이동
            slides.style.transition = 'transform 0.5s ease'; // 부드러운 이동
            slides.style.transform = `translateX(-${slideIndex * slideWidth}%)`;

            // 마지막에서 첫 번째로 이동 시 자연스럽게 처리
            if (offset > 0 && slideIndex === 0) {
                setTimeout(() => {
                    slides.style.transition = 'none'; // 애니메이션 제거
                    slides.style.transform = 'translateX(0%)'; // 첫 번째 슬라이드로 이동
                }, 500); // 이동 애니메이션 시간 후 처리
            }

            // 첫 번째에서 마지막으로 이동 시 자연스럽게 처리
            if (offset < 0 && slideIndex === totalSlides - 1) {
                setTimeout(() => {
                    slides.style.transition = 'none'; // 애니메이션 제거
                    slides.style.transform = `translateX(-${(totalSlides - 1) * slideWidth}%)`;
                }, 500); // 이동 애니메이션 시간 후 처리
            }
        }

        // 모바일 슬라이드 터치 스와이프
        let startTouchX = 0;

        document.querySelector('.mobile').addEventListener('touchstart', (e) => {
            startTouchX = e.touches[0].clientX; // 터치 시작 위치 저장
        });

        document.querySelector('.mobile').addEventListener('touchend', (e) => {
            const endTouchX = e.changedTouches[0].clientX; // 터치 끝 위치
            const diffX = startTouchX - endTouchX;

            if (diffX > 50) {
                moveSlide(1, true); // 오른쪽으로 스와이프 (다음 슬라이드)
            } else if (diffX < -50) {
                moveSlide(-1, true); // 왼쪽으로 스와이프 (이전 슬라이드)
            }
        });

        // PC 버튼 이벤트
        document.querySelector('.prev').addEventListener('click', () => moveSlide(-1));
        document.querySelector('.next').addEventListener('click', () => moveSlide(1));

    </script>
</body>

</html>
